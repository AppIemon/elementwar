<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="ì›ì†Œ ëŒ€ì „ - í™”í•™ ì›ì†Œ ì¹´ë“œ ë°°í‹€ ê²Œì„">
  <meta name="keywords" content="ê²Œì„, í™”í•™, ì›ì†Œ, ì¹´ë“œ, ë°°í‹€, êµìœ¡">
  <meta name="author" content="Element Battle Team">
  <link rel="icon" href="src/assets/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha384-k6RqeWeci5ZR/Lv4MR0sA0FfDOM8d7x2z5e5c5e5e5e5e5e5e5e5e5e5e5e5e5e" crossorigin="anonymous">
  <title>ì›ì†Œ ëŒ€ì „</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
  <!-- Express API ê¸°ë°˜ ì˜¨ë¼ì¸ í†µì‹  -->
  <style>
    /* ë½‘ê¸° ì• ë‹ˆë©”ì´ì…˜ì„ ìœ„í•œ CSS */
    .rainbow-bg {
      background: linear-gradient(45deg, #10b981, #3b82f6, #8b5cf6, #facc15);
      background-size: 400% 400%;
      animation: rainbow-bg 3s ease infinite;
    }
    
    @keyframes rainbow-bg {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    .shine-effect {
      position: relative;
      overflow: hidden;
    }
    
    .shine-effect::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
      animation: shine 2s ease-in-out;
    }
    
    @keyframes shine {
      0% { left: -100%; }
      100% { left: 100%; }
    }
    
    .shake {
      animation: shake 0.5s ease-in-out;
    }
    
    /* ì¹´ë“œ ì• ë‹ˆë©”ì´ì…˜ì„ ìœ„í•œ CSS */
    .card-entrance {
      animation: cardEntrance 0.6s ease-out;
    }
    
    @keyframes cardEntrance {
      0% {
        opacity: 0;
        transform: scale(0.5) rotateY(90deg);
      }
      50% {
        opacity: 1;
        transform: scale(1.2) rotateY(0deg);
      }
      100% {
        opacity: 1;
        transform: scale(1) rotateY(0deg);
      }
    }
    
    .card-attack {
      animation: cardAttack 0.4s ease-out;
    }
    
    @keyframes cardAttack {
      0% {
        transform: scale(1);
      }
      30% {
        transform: scale(1.3) translateY(-15px) rotateZ(8deg);
      }
      60% {
        transform: scale(1.2) translateY(-8px) rotateZ(5deg);
      }
      100% {
        transform: scale(1);
      }
    }
    
    .card-destroy {
      animation: cardDestroy 0.5s ease-in;
    }
    
    @keyframes cardDestroy {
      0% {
        transform: scale(1);
        opacity: 1;
      }
      50% {
        transform: scale(1.2) rotateZ(180deg);
        opacity: 0.5;
      }
      100% {
        transform: scale(0) rotateZ(360deg);
        opacity: 0;
      }
    }
    
    .base-damage {
      animation: baseDamage 0.5s ease-in-out;
    }
    
    @keyframes baseDamage {
      0%, 100% { 
        transform: scale(1);
        filter: brightness(1);
      }
      25% { 
        transform: scale(1.05);
        filter: brightness(1.2);
      }
      50% { 
        transform: scale(0.95);
        filter: brightness(0.8);
      }
      75% { 
        transform: scale(1.02);
        filter: brightness(1.1);
      }
    }
    
    .card-heal {
      animation: cardHeal 1.5s ease-in-out;
    }
    
    @keyframes cardHeal {
      0%, 100% { 
        transform: scale(1);
        filter: brightness(1);
      }
      25% { 
        transform: scale(1.05);
        filter: brightness(1.3) hue-rotate(120deg);
      }
      50% { 
        transform: scale(1.1);
        filter: brightness(1.5) hue-rotate(120deg);
      }
      75% { 
        transform: scale(1.05);
        filter: brightness(1.2) hue-rotate(120deg);
      }
    }
    
    /* íŠ¹ìˆ˜ëŠ¥ë ¥ ì• ë‹ˆë©”ì´ì…˜ì„ ìœ„í•œ CSS */
    .hardness-effect {
      animation: hardness-pulse 1s ease-in-out;
    }
    
    @keyframes hardness-pulse {
      0%, 100% { 
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(107, 114, 128, 0.4);
      }
      50% { 
        transform: scale(1.05);
        box-shadow: 0 0 20px 5px rgba(107, 114, 128, 0.6);
      }
    }
    
    .base-damage {
      animation: damage-shake 0.6s ease-in-out;
    }
    
    @keyframes damage-shake {
      0%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-2px); }
      20%, 40%, 60%, 80% { transform: translateX(2px); }
    }
    
    .card-heal {
      animation: heal-glow 1.5s ease-in-out;
    }
    
    @keyframes heal-glow {
      0%, 100% { 
        box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4);
      }
      50% { 
        box-shadow: 0 0 20px 5px rgba(16, 185, 129, 0.8);
      }
    }
    
    /* íŠ¹ìˆ˜ëŠ¥ë ¥ ë°œë™ ì‹œ ì¹´ë“œ ì• ë‹ˆë©”ì´ì…˜ */
    .special-ability-active {
      animation: special-ability-pulse 1s ease-in-out;
    }
    
    @keyframes special-ability-pulse {
      0%, 100% { 
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(250, 204, 21, 0.4);
      }
      25% { 
        transform: scale(1.3);
        box-shadow: 0 0 30px 10px rgba(250, 204, 21, 0.8);
      }
      50% { 
        transform: scale(1.1);
        box-shadow: 0 0 40px 15px rgba(250, 204, 21, 1);
      }
      75% { 
        transform: scale(1.2);
        box-shadow: 0 0 20px 8px rgba(250, 204, 21, 0.6);
      }
    }
    
    /* íŒŒí‹°í´ íš¨ê³¼ë¥¼ ìœ„í•œ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
    .particle {
      position: fixed;
      pointer-events: none;
      z-index: 9999;
      will-change: transform, opacity;
    }
    
    /* íŠ¹ìˆ˜ëŠ¥ë ¥ íš¨ê³¼ ì˜¤ë²„ë ˆì´ */
    .ability-effect-overlay {
      position: absolute;
      inset: 0;
      border-radius: 0.5rem;
      pointer-events: none;
      z-index: 10;
    }
    
    /* ì• ë‹ˆë©”ì´ì…˜ ì§„í–‰ ì¤‘ í”Œë˜ê·¸ */
    .animation-in-progress {
      pointer-events: none;
    }
    
    /* ëª¨ë°”ì¼ ìµœì í™” */
    @media (max-width: 768px) {
      .particle {
        display: none; /* ëª¨ë°”ì¼ì—ì„œëŠ” íŒŒí‹°í´ íš¨ê³¼ ë¹„í™œì„±í™” */
      }
      
      .special-ability-active {
        animation-duration: 0.5s; /* ëª¨ë°”ì¼ì—ì„œëŠ” ì• ë‹ˆë©”ì´ì…˜ ì‹œê°„ ë‹¨ì¶• */
      }
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }
    
    .card-heal {
      animation: cardHeal 1.5s ease-in-out;
    }
    
    @keyframes cardHeal {
      0% { box-shadow: 0 0 0 rgba(16, 185, 129, 0.4); }
      50% { box-shadow: 0 0 20px rgba(16, 185, 129, 0.8); }
      100% { box-shadow: 0 0 0 rgba(16, 185, 129, 0.4); }
    }
    
    .base-damage {
      animation: baseDamage 0.6s ease-in-out;
    }
    
    @keyframes baseDamage {
      0%, 100% { transform: scale(1); }
      25% { transform: scale(1.05); }
      50% { transform: scale(0.95); }
      75% { transform: scale(1.02); }
    }
    
    /* ì¹´ë“œ ë“±ê¸‰ë³„ ìŠ¤íƒ€ì¼ */
    .rank-common { color: #9ca3af; }
    .rank-uncommon { color: #10b981; }
    .rank-rare { color: #3b82f6; }
    .rank-epic { color: #8b5cf6; }
    .rank-legendary { color: #facc15; }
    
    /* íŠ¹ìˆ˜ ëŠ¥ë ¥ ë°°ì§€ */
    .special-ability {
      position: absolute;
      top: -8px;
      right: -8px;
      background: #f59e0b;
      color: white;
      font-size: 10px;
      font-weight: bold;
      padding: 2px 4px;
      border-radius: 50%;
      min-width: 16px;
      height: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }
    
    /* ì›ì†Œ ë­í¬ í‘œì‹œ */
    .element-rank {
      position: absolute;
      top: 5px;
      left: 5px;
      font-size: 12px;
      font-weight: bold;
      z-index: 10;
    }
    
    /* ë“œë˜ê·¸ ì¤‘ì¸ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
    .dragging {
      opacity: 0.5;
      transform: rotate(5deg);
      z-index: 1000;
    }
    
    /* ì¸ë²¤í† ë¦¬ ì§„ì… ì• ë‹ˆë©”ì´ì…˜ */
    .inventory-entry {
      animation: inventoryEntry 1s ease-out;
    }
    
    @keyframes inventoryEntry {
      0% {
        transform: scale(1.5) rotate(0deg);
        opacity: 1;
      }
      50% {
        transform: scale(1.2) rotate(180deg);
        opacity: 0.8;
      }
      100% {
        transform: scale(1) rotate(360deg);
        opacity: 1;
      }
    }
  </style>
</head>
<body class="bg-gradient-to-b from-gray-800 to-gray-900 font-sans text-white">

  <div class="max-w-6xl mx-auto p-4 perspective-1200 relative z-10">
    <div class="flex justify-between items-center mb-4">
      <h1 class="text-3xl font-bold text-yellow-400">ì›ì†Œ ëŒ€ì „</h1>
      <div class="flex items-center">
        <button id="molecule-guide-btn" class="bg-purple-600 hover:bg-purple-700 text-white py-1 px-4 rounded-md shadow transition-colors mr-3">                      
          ë¶„ì ë„ê°
        </button>
        <button id="online-match-btn" class="bg-green-600 hover:bg-green-700 text-white py-1 px-4 rounded-md shadow transition-colors mr-3">                      
          ğŸŒ ì˜¨ë¼ì¸ ë§¤ì¹­
        </button>
        <button id="tutorial-btn" class="bg-yellow-600 hover:bg-yellow-700 text-white py-1 px-4 rounded-md shadow transition-colors mr-3">                      
          ğŸ“ íŠœí† ë¦¬ì–¼
        </button>
        <div class="coin-display flex items-center bg-yellow-600 px-4 py-1 rounded-full mr-2">                                                                       
          <span class="text-xl mr-1">ğŸ’°</span>
          <span id="coin-amount" class="font-bold">0</span>
        </div>
        <div class="energy-display flex items-center bg-blue-600 px-4 py-1 rounded-full mr-2">
          <span class="text-xl mr-1">âš¡</span>
          <span id="energy-amount" class="font-bold">0</span>
        </div>
        <div class="heat-display flex items-center bg-red-600 px-4 py-1 rounded-full mr-2">
          <span class="text-xl mr-1">ğŸ”¥</span>
          <span id="heat-amount" class="font-bold">0</span>
        </div>
        <div class="star-display flex items-center bg-purple-600 px-4 py-1 rounded-full mr-2">
          <span class="text-xl mr-1">â­</span>
          <span id="player-stars-count" class="font-bold">0</span>
        </div>
        <div class="ml-3 difficulty-container">
          <label for="difficulty-select" class="text-sm text-gray-200 mr-2">ë‚œì´ë„</label>
          <select id="difficulty-select" class="bg-gray-700 text-white text-sm px-2 py-1 rounded-md border border-gray-600">
            <option value="very_easy">ë§¤ìš° ì‰¬ì›€</option>
            <option value="easy">ì‰¬ì›€</option>
            <option value="normal" selected>ë³´í†µ</option>
            <option value="hard">ì–´ë ¤ì›€</option>
            <option value="very_hard">ë§¤ìš° ì–´ë ¤ì›€</option>
          </select>
        </div>
      </div>
    </div>
    
    <div class="game-info mb-4 flex justify-between">
      <div class="player-info text-left">
        <h2 class="text-xl font-bold text-blue-400">í”Œë ˆì´ì–´</h2>
        <div>ì ìˆ˜: <span id="player-score" class="font-bold">0</span></div>
      </div>
      
      <div id="result-message" class="text-center text-xl font-bold h-12 text-green-400">
        ì›ì†Œë¥¼ ë°°ì¹˜í•˜ì„¸ìš”!
      </div>
      
      <div class="computer-info text-right">
        <h2 class="text-xl font-bold text-red-400">ì»´í“¨í„°</h2>
        <div>ì ìˆ˜: <span id="computer-score" class="font-bold">0</span></div>
      </div>
    </div>

    <div class="battlefield-container relative mb-8 h-[550px] transform-style-preserve-3d filter drop-shadow(0 10px 15px rgba(0,0,0,0.4))">
      <div id="computer-base" class="absolute top-4 right-4 z-10">
        <div class="bg-red-900/90 backdrop-blur-sm rounded-lg p-2 shadow-lg w-32">
          <h3 class="text-center text-red-200 font-bold text-xs mb-1">ì  ê¸°ì§€</h3>
          <div class="bg-red-800/80 rounded p-1">
            <div class="flex justify-between items-center mb-1">
              <span class="text-xs text-red-200">HP:</span>
              <span id="computer-base-hp" class="font-bold text-red-200 text-xs">100</span>
            </div>
            <div class="w-full bg-red-950 rounded-full h-1.5">
              <div id="computer-base-hp-bar" class="bg-red-500 h-1.5 rounded-full" style="width: 100%"></div>
            </div>
          </div>
        </div>
      </div>
      
      <div id="battlefield" class="bg-gradient-to-b from-gray-700 to-gray-800 rounded-xl p-6 transform rotateX(75deg) shadow-xl mt-8 border-2 border-gray-600/50">
        <div class="grid grid-cols-5 gap-4">
          <div id="lane-0" class="battlefield-lane relative h-[300px] border-l border-r border-yellow-900/30 px-1">
            <div class="lane-slots flex flex-col justify-between h-full">
              <div class="computer-slot lane-slot h-32 w-24 mx-auto"></div>
              <div class="player-slot lane-slot h-32 w-24 mx-auto"></div>
            </div>
          </div>
          <div id="lane-1" class="battlefield-lane relative h-[300px] border-l border-r border-yellow-900/30 px-1">
            <div class="lane-slots flex flex-col justify-between h-full">
              <div class="computer-slot lane-slot h-32 w-24 mx-auto"></div>
              <div class="player-slot lane-slot h-32 w-24 mx-auto"></div>
            </div>
          </div>
          <div id="lane-2" class="battlefield-lane relative h-[300px] border-l border-r border-yellow-900/30 px-1">
            <div class="lane-slots flex flex-col justify-between h-full">
              <div class="computer-slot lane-slot h-32 w-24 mx-auto"></div>
              <div class="player-slot lane-slot h-32 w-24 mx-auto"></div>
            </div>
          </div>
          <div id="lane-3" class="battlefield-lane relative h-[300px] border-l border-r border-yellow-900/30 px-1">
            <div class="lane-slots flex flex-col justify-between h-full">
              <div class="computer-slot lane-slot h-32 w-24 mx-auto"></div>
              <div class="player-slot lane-slot h-32 w-24 mx-auto"></div>
            </div>
          </div>
          <div id="lane-4" class="battlefield-lane relative h-[300px] border-l border-r border-yellow-900/30 px-1">
            <div class="lane-slots flex flex-col justify-between h-full">
              <div class="computer-slot lane-slot h-32 w-24 mx-auto"></div>
              <div class="player-slot lane-slot h-32 w-24 mx-auto"></div>
            </div>
          </div>
        </div>
      </div>

      <div id="player-base" class="absolute bottom-4 left-4 z-10">
        <div class="bg-blue-900/90 backdrop-blur-sm rounded-lg p-2 shadow-lg w-32">
          <h3 class="text-center text-blue-200 font-bold text-xs mb-1">ë‚´ ê¸°ì§€</h3>
          <div class="bg-blue-800/80 rounded p-1">
            <div class="flex justify-between items-center mb-1">
              <span class="text-xs text-blue-200">HP:</span>
              <span id="player-base-hp" class="font-bold text-blue-200 text-xs">100</span>
            </div>
            <div class="w-full bg-blue-950 rounded-full h-1.5">
              <div id="player-base-hp-bar" class="bg-blue-500 h-1.5 rounded-full" style="width: 100%"></div>
            </div>
          </div>
        </div>
      </div>
    </div>  

    <div class="player-area">
      <h2 class="text-xl font-bold text-blue-400 mb-3">ë‚´ ì†íŒ¨</h2>
      
      <div id="player-hand" class="flex flex-wrap justify-center gap-4 min-h-[160px] mb-6 p-4 rounded-lg bg-gray-800 shadow-inner transition-all duration-300"></div>
      
      <div class="controls flex justify-center space-x-3 mb-4 flex-wrap">
        <button id="card-pack-btn" class="bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-md shadow transition-colors m-1">
          ğŸ“¦ ì¹´ë“œ íŒ©
        </button>
        <button id="star-management-btn" class="bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-md shadow transition-colors m-1">
          ğŸŒŸ ìš°ì£¼
        </button>
        <button id="end-turn-btn" class="bg-yellow-600 hover:bg-yellow-700 text-white py-2 px-4 rounded-md shadow transition-colors m-1">
          í„´ ì¢…ë£Œ
        </button>
        <!-- í„´ íƒ€ì´ë¨¸ (ì˜¨ë¼ì¸ ëª¨ë“œì—ì„œë§Œ í‘œì‹œ) -->
        <div id="turn-timer-container" class="hidden">
          <div class="bg-gray-800 text-white py-2 px-4 rounded-md shadow m-1">
            <div class="text-sm font-bold">í„´ ì‹œê°„</div>
            <div id="turn-timer" class="text-lg font-mono">20ì´ˆ</div>
            <div id="current-player" class="text-xs text-gray-300"></div>
          </div>
        </div>
        <button id="reset-btn" class="bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-md shadow transition-colors m-1 hidden">
          ê²Œì„ ë¦¬ì…‹
        </button>
      </div>
    </div>

    <div id="draw-animation-container" class="fixed inset-0 flex items-center justify-center z-50 pointer-events-none hidden">
      <div id="draw-animation" class="relative">
        <div class="card-pack bg-gradient-to-br from-purple-600 to-blue-800 w-48 h-64 rounded-lg shadow-2xl flex items-center justify-center">
          <span class="text-white text-lg font-bold">ì›ì†Œ ì¹´ë“œ</span>
        </div>
        <div id="drawn-card" class="absolute top-0 left-0 w-48 h-64 opacity-0"></div>
      </div>
    </div>
    <div id="game-result-modal" class="fixed inset-0 bg-black bg-opacity-90 hidden flex items-center justify-center z-50">
      <div class="bg-gray-800 rounded-lg p-6 max-w-md w-full text-center">
        <h2 id="result-title" class="text-4xl font-bold mb-4"></h2>
        <p id="result-message-detail" class="text-xl mb-6"></p>
        <button id="new-game-btn" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded text-xl">
          ìƒˆ ê²Œì„ ì‹œì‘
        </button>
      </div>
    </div>

    <div id="molecule-collection-modal" class="fixed inset-0 bg-black bg-opacity-75 hidden flex items-center justify-center z-50">
      <div class="bg-gray-800 rounded-lg p-6 max-w-4xl w-full max-h-[80vh] overflow-y-auto">
        <h2 class="text-2xl font-bold text-purple-300 mb-4">ë¶„ì ë„ê°</h2>
        <div id="molecule-collection-content" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>
        <button id="close-collection-modal" class="mt-4 w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
          ë‹«ê¸°
        </button>
      </div>
    </div>

    <div id="card-detail-modal" class="fixed inset-0 bg-black bg-opacity-75 hidden flex items-center justify-center z-50">
      <div class="bg-gray-800 rounded-lg p-6 max-w-md w-full">
        <div id="modal-content"></div>
        <button id="close-modal" class="mt-4 w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
          ë‹«ê¸°
        </button>
      </div>
    </div>

    <div id="molecule-viewer-modal" class="fixed inset-0 bg-black bg-opacity-75 hidden flex items-center justify-center z-50">                                  
        <div class="bg-gray-800 rounded-lg p-6 max-w-lg w-full text-center">    
            <h2 class="text-2xl font-bold text-cyan-400 mb-4">ë¶„ì ì •ë³´</h2>    
            <div id="molecule-viewer-content">
                <p>ë¶„ì ì •ë³´ë¥¼ ë¡œë“œ ì¤‘...</p>
            </div>
            <div class="flex justify-between mt-4">
                 <button id="prev-molecule" class="bg-gray-700 p-2 rounded-full">&lt;</button>                                                                  
                 <button id="next-molecule" class="bg-gray-700 p-2 rounded-full">&gt;</button>                                                                  
            </div>
            <button id="close-molecule-viewer" class="mt-4 w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">                        
                ë‹«ê¸°
            </button>
        </div>
    </div>



    <!-- ì˜¨ë¼ì¸ ë§¤ì¹­ ëª¨ë‹¬ -->
    <div id="online-matching-modal" class="fixed inset-0 bg-black bg-opacity-75 hidden flex items-center justify-center z-50">
      <div class="bg-gray-800 rounded-lg p-6 max-w-md w-full">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-2xl font-bold text-green-300">ğŸŒ ì˜¨ë¼ì¸ ë§¤ì¹­</h2>
          <button id="close-matching-modal" class="text-gray-400 hover:text-white text-2xl">&times;</button>
        </div>
        

        <!-- ë§¤ì¹­ ìƒíƒœ í‘œì‹œ -->
        <div id="matching-status" class="text-center mb-6">
          <div id="matching-waiting" class="hidden">
            <div class="flex items-center justify-center mb-4">
              <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"></div>
            </div>
            <p class="text-green-400 text-lg">ë§¤ì¹­ ì¤‘...</p>
            <p class="text-gray-400 text-sm">ë‹¤ë¥¸ í”Œë ˆì´ì–´ë¥¼ ì°¾ê³  ìˆìŠµë‹ˆë‹¤</p>
          </div>
          
          <div id="matching-found" class="hidden">
            <div class="text-green-400 text-2xl mb-2">ğŸ‰</div>
            <p class="text-green-400 text-lg">ë§¤ì¹­ ì™„ë£Œ!</p>
            <p class="text-gray-300">ìƒëŒ€ë°©: <span id="opponent-name" class="font-bold text-blue-400"></span></p>
          </div>

          <div id="matching-error" class="hidden">
            <div class="text-red-400 text-2xl mb-2">âŒ</div>
            <p class="text-red-400 text-lg">ë§¤ì¹­ ì‹¤íŒ¨</p>
            <p class="text-gray-300" id="error-message">ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”</p>
          </div>
        </div>

        <!-- ë²„íŠ¼ë“¤ -->
        <div class="flex space-x-3">
          <button id="cancel-matching-btn" class="flex-1 bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded hidden">
            ë§¤ì¹­ ì·¨ì†Œ
          </button>
          <button id="close-matching-modal-btn" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded">
            ë‹«ê¸°
          </button>
        </div>

        <!-- ì—°ê²° ìƒíƒœ í‘œì‹œ -->
        <div class="mt-4 text-center">
          <div id="connection-status" class="text-sm">
            <span id="connection-indicator" class="inline-block w-2 h-2 rounded-full bg-gray-500 mr-2"></span>
            <span id="connection-text">ì—°ê²° í™•ì¸ ì¤‘...</span>
          </div>
        </div>
      </div>
    </div>


    <!-- ë³„ ê´€ë¦¬ ëª¨ë‹¬ (ìƒˆë¡œìš´ ì‹œìŠ¤í…œ) -->
    <div id="star-management-modal" class="fixed inset-0 bg-black bg-opacity-75 hidden flex items-center justify-center z-50">
      <div class="bg-gray-800 rounded-lg p-6 max-w-6xl w-full max-h-[90vh] flex flex-col">
        <div class="flex justify-between items-center mb-4 flex-shrink-0">
          <h2 class="text-2xl font-bold text-purple-300">â­ ë³„ ê´€ë¦¬ ì‹œìŠ¤í…œ</h2>
          <button id="close-star-management-modal" class="text-gray-400 hover:text-white text-2xl">&times;</button>
        </div>
        
        <!-- ë³„ í˜„í™© -->
        <div class="bg-gray-700 p-4 rounded-lg mb-6">
          <h3 class="text-xl font-bold text-yellow-300 mb-4">â­ ë³„ í˜„í™©</h3>
          <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
            <div class="bg-gray-600 p-3 rounded text-center">
              <div class="text-2xl mb-1">â­</div>
              <div class="text-sm text-gray-300">ë³´ìœ  ë³„</div>
              <div id="active-stars-count" class="text-xl font-bold text-yellow-400">0</div>
            </div>
            <div class="bg-gray-600 p-3 rounded text-center">
              <div class="text-2xl mb-1">ğŸ“ˆ</div>
              <div class="text-sm text-gray-300">ë³„ ë ˆë²¨</div>
              <div id="star-level-count" class="text-xl font-bold text-purple-400">Lv.1</div>
            </div>
            <div class="bg-gray-600 p-3 rounded text-center">
              <div class="text-2xl mb-1">â°</div>
              <div class="text-sm text-gray-300">ë³„ ì‹œìŠ¤í…œ ìƒíƒœ</div>
              <div id="next-auto-generation" class="text-sm font-bold text-cyan-400">100í„´ í›„ í™œì„±í™”</div>
            </div>
            <div class="bg-gray-600 p-3 rounded text-center">
              <div class="text-2xl mb-1">ğŸ’«</div>
              <div class="text-sm text-gray-300">ì´ ìƒì„±ëœ ë³„</div>
              <div id="total-stars-created" class="text-xl font-bold text-green-400">0</div>
            </div>
          </div>
        </div>

        <!-- ë³„ ì„±ì¥ ì‹œìŠ¤í…œ -->
        <div class="bg-gray-700 p-4 rounded-lg mb-6">
          <h3 class="text-xl font-bold text-purple-300 mb-4">ğŸŒŸ ë³„ ì„±ì¥ ì‹œìŠ¤í…œ</h3>
          <p class="text-sm text-gray-300 mb-4">ì›ì†Œë¥¼ ì‚¬ìš©í•˜ì—¬ ë³„ì„ í‚¤ìš°ê³ , ë ˆë²¨ì— ë”°ë¼ ì´ˆì‹ ì„± ë½‘ê¸°ê°€ í•´ê¸ˆë©ë‹ˆë‹¤!</p>
          
          <!-- ë ˆë²¨ ë° ê²½í—˜ì¹˜ ë°” -->
          <div class="mb-4">
            <div class="flex justify-between text-sm text-gray-300 mb-2">
              <span>ë³„ ê²½í—˜ì¹˜</span>
              <span id="star-exp-count">0/100 (100 ë‚¨ìŒ)</span>
            </div>
            <div class="w-full bg-gray-600 rounded-full h-4">
              <div id="star-exp-bar" class="bg-gradient-to-r from-purple-500 to-pink-500 h-4 rounded-full transition-all duration-500" style="width: 0%"></div>
            </div>
          </div>
          
          <!-- ì›ì†Œ ê·¸ë£¹ë³„ ê²½í—˜ì¹˜ ê°€ì¤‘ì¹˜ ì„¤ëª… -->
          <div class="p-3 bg-gray-600 rounded">
            <h4 class="text-lg font-bold text-gray-200 mb-2">ì›ì†Œ ê·¸ë£¹ë³„ ê²½í—˜ì¹˜ ê°€ì¤‘ì¹˜</h4>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-3 text-sm">
              <div class="text-center">
                <div class="text-green-400 font-bold">ğŸŒ± ê²½ê¸ˆì†ë¥˜</div>
                <div class="text-gray-300">Li, Be, Na, Mg, Al</div>
                <div class="text-yellow-400 font-bold">+1 ê²½í—˜ì¹˜</div>
              </div>
              <div class="text-center">
                <div class="text-blue-400 font-bold">âš™ï¸ ì¤‘ê¸ˆì†ë¥˜</div>
                <div class="text-gray-300">Si, P, S, Ca</div>
                <div class="text-yellow-400 font-bold">+5 ê²½í—˜ì¹˜</div>
              </div>
              <div class="text-center">
                <div class="text-red-400 font-bold">ğŸ’£ ì² ì¡± ê¸ˆì†ë¥˜</div>
                <div class="text-gray-300">Sc, Ti, V, Cr, Mn, Fe</div>
                <div class="text-yellow-400 font-bold">+30 ê²½í—˜ì¹˜</div>
              </div>
            </div>
          </div>
        </div>

        <!-- ì´ˆì‹ ì„± ë½‘ê¸° ì‹œìŠ¤í…œ -->
        <div class="bg-gray-700 p-4 rounded-lg mb-6">
          <h3 class="text-xl font-bold text-cyan-300 mb-4">ğŸŒŸ ì´ˆì‹ ì„± ë½‘ê¸° ì‹œìŠ¤í…œ</h3>
          <p class="text-sm text-gray-300 mb-4">ë³„ ë ˆë²¨ì— ë”°ë¼ í•´ê¸ˆë˜ëŠ” íŠ¹ë³„í•œ ë½‘ê¸°! 27ë²ˆ ì´ìƒì˜ ê³ ê¸‰ ì›ì†Œë¥¼ íšë“í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
          
          <div id="supernova-gacha-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <!-- ì´ˆì‹ ì„± ë½‘ê¸° ì¹´ë“œë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
          </div>
        </div>

        <!-- ë³„ ì‹œìŠ¤í…œ ì •ë³´ -->
        <div class="bg-gray-700 p-4 rounded-lg mb-6">
          <h3 class="text-xl font-bold text-green-300 mb-4">ğŸ’« ë³„ ì‹œìŠ¤í…œ ì •ë³´</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="bg-gray-600 p-3 rounded text-center">
              <div class="text-2xl mb-1">â°</div>
              <div class="text-sm text-gray-300">ì‹œìŠ¤í…œ í™œì„±í™”</div>
              <div class="text-lg font-bold text-cyan-400">100í„´ë¶€í„°</div>
              </div>
            <div class="bg-gray-600 p-3 rounded text-center">
              <div class="text-2xl mb-1">â­</div>
              <div class="text-sm text-gray-300">ë³„ ë³´ìœ </div>
              <div class="text-lg font-bold text-yellow-400">1ê°œ ê³ ì •</div>
            </div>
              </div>
          <div class="mt-3 p-2 bg-gray-600 rounded text-center">
            <div class="text-sm text-gray-300">ğŸ’¡ 100í„´ë¶€í„° ë³„ ì‹œìŠ¤í…œì´ í™œì„±í™”ë˜ì–´ ì›ì†Œë¡œ ë³„ì„ í‚¤ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤!</div>
          </div>
        </div>

        <!-- ì´ˆì‹ ì„± ëŒ€ê¸°ì—´ -->
        <div class="bg-gray-700 p-4 rounded-lg flex-1 overflow-y-auto">
          <h3 class="text-xl font-bold text-red-300 mb-4">ğŸŒŸ ì´ˆì‹ ì„± ëŒ€ê¸°ì—´</h3>
          <div class="mb-3 p-2 bg-gray-600 rounded text-center">
            <div class="text-sm text-gray-300">
              ğŸ’« <strong>í—¬ë¥¨ íš¨ê³¼:</strong> He 10ê°œë‹¹ ì´ˆì‹ ì„± í„´ 1í„´ ë‹¨ì¶•!
            </div>
          </div>
          <div id="supernova-queue" class="space-y-2">
            <div class="text-center text-gray-400 py-8">
              <div class="text-4xl mb-2">ğŸŒŒ</div>
              <p>ëŒ€ê¸° ì¤‘ì¸ ì´ˆì‹ ì„±ì´ ì—†ìŠµë‹ˆë‹¤</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ì—ë„ˆì§€ ì‹œìŠ¤í…œ ëª¨ë‹¬ -->
    <div id="fuel-system-modal" class="fixed inset-0 bg-black bg-opacity-75 hidden flex items-center justify-center z-50">
      <div class="bg-gray-800 rounded-lg p-6 max-w-4xl w-full max-h-[90vh] flex flex-col">
        <div class="flex justify-between items-center mb-4 flex-shrink-0">
          <h2 class="text-2xl font-bold text-orange-300">âš¡ ë¶„ì ì—ë„ˆì§€ ì‹œìŠ¤í…œ</h2>
          <button id="close-fuel-system-modal" class="text-gray-400 hover:text-white text-2xl">&times;</button>
        </div>
        
        <!-- ì—ë„ˆì§€ í˜„í™© -->
        <div class="bg-gray-700 p-4 rounded-lg mb-6">
          <h3 class="text-xl font-bold text-orange-300 mb-4">ì—ë„ˆì§€ í˜„í™©</h3>
          <div class="flex items-center gap-4">
            <div class="flex-1">
              <div class="flex justify-between items-center mb-2">
                <span class="text-sm text-gray-300">í˜„ì¬ ì—ë„ˆì§€</span>
                <span id="fuel-ratio" class="text-sm text-orange-400">0</span>
              </div>
            </div>
            <div class="text-2xl font-bold text-orange-400" id="fuel-amount">0</div>
          </div>
        </div>

        <!-- ì—ë„ˆì§€ ëŠ¥ë ¥ -->
        <div class="bg-gray-700 p-4 rounded-lg mb-6">
          <h3 class="text-xl font-bold text-green-300 mb-4">ì—ë„ˆì§€ ëŠ¥ë ¥</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <button id="fuel-heal-all" class="bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded disabled:opacity-50" disabled>
              <div class="text-lg font-bold">ğŸ’š ì „ì²´ ì¹˜ë£Œ</div>
              <div class="text-sm">ë¹„ìš©: 20 ì—ë„ˆì§€</div>
            </button>
            <button id="fuel-boost-attack" class="bg-red-600 hover:bg-red-700 text-white py-3 px-4 rounded disabled:opacity-50" disabled>
              <div class="text-lg font-bold">âš”ï¸ ê³µê²©ë ¥ ì¦ê°€</div>
              <div class="text-sm">ë¹„ìš©: 15 ì—ë„ˆì§€</div>
            </button>
            <button id="fuel-energy-boost" class="bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded disabled:opacity-50" disabled>
              <div class="text-lg font-bold">âš¡ ì—ë„ˆì§€ ì¦ê°€</div>
              <div class="text-sm">ë¹„ìš©: 10 ì—ë„ˆì§€</div>
            </button>
            <button id="fuel-card-draw" class="bg-purple-600 hover:bg-purple-700 text-white py-3 px-4 rounded disabled:opacity-50" disabled>
              <div class="text-lg font-bold">ğŸƒ ì¹´ë“œ ë½‘ê¸°</div>
              <div class="text-sm">ë¹„ìš©: 25 ì—ë„ˆì§€</div>
            </button>
          </div>
        </div>

        <!-- ì—ë„ˆì§€ íšë“ ë°©ë²• -->
        <div class="bg-gray-700 p-4 rounded-lg flex-1 overflow-y-auto">
          <h3 class="text-xl font-bold text-cyan-300 mb-4">ì—ë„ˆì§€ íšë“ ë°©ë²•</h3>
          <div class="space-y-3">
            <div class="bg-gray-600 p-3 rounded">
              <h4 class="text-lg font-bold text-yellow-300 mb-2">ë¶„ì ì—ë„ˆì§€ ë³€í™˜</h4>
              <p class="text-sm text-gray-300 mb-2">ë¶„ì ì¹´ë“œë¥¼ ì—ë„ˆì§€ë¡œ ë³€í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
              <div class="text-sm text-gray-300">
                <p>â€¢ H2O (ë¬¼): 3 ì—ë„ˆì§€</p>
                <p>â€¢ CO2 (ì´ì‚°í™”íƒ„ì†Œ): 2 ì—ë„ˆì§€</p>
                <p>â€¢ CH4 (ë©”íƒ„): 6 ì—ë„ˆì§€</p>
                <p>â€¢ C6H12O6 (í¬ë„ë‹¹): 12 ì—ë„ˆì§€</p>
              </div>
            </div>
            <div class="bg-gray-600 p-3 rounded">
              <h4 class="text-lg font-bold text-purple-300 mb-2">ë³„ ë ˆë²¨ ë³´ë„ˆìŠ¤</h4>
              <p class="text-sm text-gray-300">ë³„ ë ˆë²¨ì´ ë†’ì€ ë¶„ìëŠ” ë” ë§ì€ ì—ë„ˆì§€ë¥¼ ì œê³µí•©ë‹ˆë‹¤</p>
            </div>
          </div>
        </div>
      </div>
    </div>


    <!-- íŠœí† ë¦¬ì–¼ ë„ì›€ë§ ëª¨ë‹¬ -->
    <div id="tutorial-help-modal" class="fixed inset-0 bg-black bg-opacity-75 hidden flex items-center justify-center z-50">
      <div class="bg-gray-800 rounded-lg p-6 max-w-2xl w-full">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-2xl font-bold text-yellow-300">ğŸ“ íŠœí† ë¦¬ì–¼ ê°€ì´ë“œ</h2>
          <button id="close-tutorial-help" class="text-gray-400 hover:text-white text-2xl">&times;</button>
        </div>
        
        <div class="space-y-4">
          <div class="bg-gradient-to-r from-yellow-600/20 to-orange-600/20 p-4 rounded-lg border border-yellow-400/30">
            <h3 class="text-lg font-bold text-yellow-300 mb-2">ğŸŒŸ ì›ì†Œ ëŒ€ì „ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!</h3>
            <p class="text-gray-300 text-sm leading-relaxed">
              í™”í•™ ì›ì†Œë“¤ì„ ì‚¬ìš©í•œ ì „ëµ ì¹´ë“œ ê²Œì„ì…ë‹ˆë‹¤. íŠœí† ë¦¬ì–¼ì„ í†µí•´ ê²Œì„ì˜ ëª¨ë“  ê¸°ëŠ¥ì„ ë°°ì›Œë³´ì„¸ìš”!
            </p>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="bg-gray-700 p-4 rounded-lg">
              <h4 class="text-lg font-bold text-blue-300 mb-2">ğŸ® ê¸°ë³¸ ê²Œì„í”Œë ˆì´</h4>
              <ul class="text-sm text-gray-300 space-y-1">
                <li>â€¢ ì›ì†Œ ì¹´ë“œë¥¼ ì „ì¥ì— ë°°ì¹˜</li>
                <li>â€¢ ìƒëŒ€ë°© ì¹´ë“œì™€ ì „íˆ¬</li>
                <li>â€¢ ìƒëŒ€ë°© ê¸°ì§€ ê³µê²©</li>
                <li>â€¢ í•µìœµí•©ìœ¼ë¡œ ê°•ë ¥í•œ ì›ì†Œ ìƒì„±</li>
              </ul>
            </div>
            
            <div class="bg-gray-700 p-4 rounded-lg">
              <h4 class="text-lg font-bold text-purple-300 mb-2">âš—ï¸ ê³ ê¸‰ ì‹œìŠ¤í…œ</h4>
              <ul class="text-sm text-gray-300 space-y-1">
                <li>â€¢ ë¶„ì í•©ì„± ë° ë„ê°</li>
                <li>â€¢ ë³„ ê´€ë¦¬ ë° ìœµí•©</li>
                <li>â€¢ ì—ë„ˆì§€ ì‹œìŠ¤í…œ</li>
                <li>â€¢ ì˜¨ë¼ì¸ ë§¤ì¹­</li>
              </ul>
            </div>
          </div>
          
          <div class="bg-blue-900/20 border border-blue-400/30 p-4 rounded-lg">
            <h4 class="text-lg font-bold text-blue-300 mb-2">ğŸ’¡ íŠœí† ë¦¬ì–¼ íŠ¹ì§•</h4>
            <ul class="text-sm text-gray-300 space-y-1">
              <li>â€¢ 12ë‹¨ê³„ì˜ ì²´ê³„ì ì¸ ê°€ì´ë“œ</li>
              <li>â€¢ ì‹¤ì‹œê°„ í•˜ì´ë¼ì´íŠ¸ ë° íˆ´íŒ</li>
              <li>â€¢ í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì§€ì› (â†â†’, Enter, Esc)</li>
              <li>â€¢ ì–¸ì œë“ ì§€ ì´ì „/ë‹¤ìŒ ë‹¨ê³„ ì´ë™ ê°€ëŠ¥</li>
            </ul>
          </div>
        </div>
        
        <div class="flex justify-between mt-6">
          <button id="close-tutorial-help-btn" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded">
            ë‹«ê¸°
          </button>
          <button id="start-tutorial-from-help" class="bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded">
            ğŸš€ íŠœí† ë¦¬ì–¼ ì‹œì‘í•˜ê¸°
          </button>
        </div>
      </div>
    </div>

    <!-- ë¶„ì ë„ê° ëª¨ë‹¬ -->
    <div id="molecule-guide-modal" class="fixed inset-0 bg-black bg-opacity-75 hidden flex items-center justify-center z-50">
        <div class="bg-gray-800 rounded-lg p-6 max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-bold text-purple-300">ë¶„ì ë„ê°</h2>
                <button id="close-molecule-guide" class="text-gray-400 hover:text-white text-2xl">&times;</button>
            </div>
            
            <!-- ê²€ìƒ‰ ë° í•„í„° ì˜ì—­ -->
            <div class="mb-6">
                <div class="flex flex-wrap gap-4 mb-4">
                    <!-- ê²€ìƒ‰ ì…ë ¥ -->
                    <div class="flex-1 min-w-64">
                        <input 
                            type="text" 
                            id="molecule-search" 
                            placeholder="ë¶„ìëª…, í™”í•™ì‹, ì„¤ëª…ìœ¼ë¡œ ê²€ìƒ‰..." 
                            class="w-full px-4 py-2 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none"
                        >
                    </div>
                    
                    <!-- í•„í„° ë²„íŠ¼ë“¤ -->
                    <div class="flex gap-2 flex-wrap">
                        <button class="molecule-filter-btn bg-blue-600 text-white px-3 py-2 rounded text-sm" data-filter="all">ì „ì²´</button>
                        <button class="molecule-filter-btn bg-gray-600 text-gray-300 px-3 py-2 rounded text-sm" data-filter="discovered">ë°œê²¬ë¨</button>
                        <button class="molecule-filter-btn bg-gray-600 text-gray-300 px-3 py-2 rounded text-sm" data-filter="undiscovered">ë¯¸ë°œê²¬</button>
                        <button class="molecule-filter-btn bg-gray-600 text-gray-300 px-3 py-2 rounded text-sm" data-filter="ìƒëª…">ìƒëª…</button>
                        <button class="molecule-filter-btn bg-gray-600 text-gray-300 px-3 py-2 rounded text-sm" data-filter="ê¸°ì²´">ê¸°ì²´</button>
                        <button class="molecule-filter-btn bg-gray-600 text-gray-300 px-3 py-2 rounded text-sm" data-filter="ì‚°ì„±">ì‚°ì„±</button>
                        <button class="molecule-filter-btn bg-gray-600 text-gray-300 px-3 py-2 rounded text-sm" data-filter="ì—¼ê¸°">ì—¼ê¸°</button>
                        <button class="molecule-filter-btn bg-gray-600 text-gray-300 px-3 py-2 rounded text-sm" data-filter="ë…ì„±">ë…ì„±</button>
                        <button class="molecule-filter-btn bg-gray-600 text-gray-300 px-3 py-2 rounded text-sm" data-filter="ì†Œë…">ì†Œë…</button>
                        <button class="molecule-filter-btn bg-gray-600 text-gray-300 px-3 py-2 rounded text-sm" data-filter="ë³´í˜¸">ë³´í˜¸</button>
                        <button class="molecule-filter-btn bg-gray-600 text-gray-300 px-3 py-2 rounded text-sm" data-filter="ê¸ˆì†">ê¸ˆì†</button>
                        <button class="molecule-filter-btn bg-gray-600 text-gray-300 px-3 py-2 rounded text-sm" data-filter="í­ë°œ">í­ë°œ</button>
                        <button class="molecule-filter-btn bg-gray-600 text-gray-300 px-3 py-2 rounded text-sm" data-filter="ê·¹í•œ">ê·¹í•œ</button>
                        <button class="molecule-filter-btn bg-gray-600 text-gray-300 px-3 py-2 rounded text-sm" data-filter="ì´‰ë§¤">ì´‰ë§¤</button>
                        <button class="molecule-filter-btn bg-gray-600 text-gray-300 px-3 py-2 rounded text-sm" data-filter="ë‚´ì—´">ë‚´ì—´</button>
                        <button class="molecule-filter-btn bg-gray-600 text-gray-300 px-3 py-2 rounded text-sm" data-filter="íƒˆìˆ˜">íƒˆìˆ˜</button>
                        <button class="molecule-filter-btn bg-gray-600 text-gray-300 px-3 py-2 rounded text-sm" data-filter="ì—°ì†Œ">ì—°ì†Œ</button>
                        <button class="molecule-filter-btn bg-gray-600 text-gray-300 px-3 py-2 rounded text-sm" data-filter="ì˜ë£Œ">ì˜ë£Œ</button>
                        <button class="molecule-filter-btn bg-gray-600 text-gray-300 px-3 py-2 rounded text-sm" data-filter="ì‚°í™”">ì‚°í™”</button>
                        <button class="molecule-filter-btn bg-gray-600 text-gray-300 px-3 py-2 rounded text-sm" data-filter="ë°©ì‚¬ì„±">ë°©ì‚¬ì„±</button>
                        <button class="molecule-filter-btn bg-gray-600 text-gray-300 px-3 py-2 rounded text-sm" data-filter="í•µ">í•µ</button>
                    </div>
                </div>
                
                <!-- ì •ë ¬ ë²„íŠ¼ë“¤ -->
                <div class="flex gap-2">
                    <span class="text-gray-400 text-sm self-center">ì •ë ¬:</span>
                    <button class="molecule-sort-btn bg-gray-600 text-gray-300 px-3 py-1 rounded text-sm" data-sort="name">ì´ë¦„</button>
                    <button class="molecule-sort-btn bg-gray-600 text-gray-300 px-3 py-1 rounded text-sm" data-sort="rarity">í¬ê·€ë„</button>
                    <button class="molecule-sort-btn bg-gray-600 text-gray-300 px-3 py-1 rounded text-sm" data-sort="atk">ê³µê²©ë ¥</button>
                    <button class="molecule-sort-btn bg-gray-600 text-gray-300 px-3 py-1 rounded text-sm" data-sort="hp">ì²´ë ¥</button>
                </div>
            </div>
            
            <!-- ë¶„ì ëª©ë¡ -->
            <div id="molecule-list" class="flex-1 overflow-y-auto">
                <div class="text-center text-gray-400 py-8">
                    <i class="fas fa-spinner fa-spin text-4xl mb-4"></i>
                    <p>ë¶„ì ë°ì´í„°ë¥¼ ë¡œë“œ ì¤‘...</p>
                </div>
            </div>
            
            <!-- í•˜ë‹¨ ì •ë³´ -->
            <div class="mt-4 pt-4 border-t border-gray-600 flex justify-between items-center text-sm text-gray-400">
                <div id="discovery-progress">
                    ë°œê²¬ ì§„í–‰ë¥ : <span id="discovered-count">0</span> / <span id="total-count">0</span> (<span id="discovery-percentage">0</span>%)
                </div>
                <div>
                    <i class="fas fa-check-circle text-green-400"></i> ë°œê²¬ë¨
                    <i class="fas fa-question-circle text-gray-400 ml-4"></i> ë¯¸ë°œê²¬
                </div>
            </div>
        </div>
    </div>
  </div>
  
  <style>
    /* ê¸°ë³¸ 3D íš¨ê³¼ */
    .perspective-1200 {
      perspective: 1200px;
      perspective-origin: 50% 85%;
    }

    .transform-style-preserve-3d {
      transform-style: preserve-3d;
    }


    /* ê·¸ë¼ë””ì–¸íŠ¸ ë°°ê²½ - ì›ì†Œ ì£¼ê¸°ìœ¨í‘œ ìƒ‰ìƒ */
    body {
      background: linear-gradient(135deg, 
        #ff6b6b 0%,    /* ìˆ˜ì†Œ - ë¹¨ê°• */
        #4ecdc4 10%,   /* í—¬ë¥¨ - ì²­ë¡ */
        #45b7d1 20%,   /* ë¦¬íŠ¬ - íŒŒë‘ */
        #96ceb4 30%,   /* ë² ë¦´ë¥¨ - ì—°ë‘ */
        #feca57 40%,   /* ë¶•ì†Œ - ë…¸ë‘ */
        #ff9ff3 50%,   /* íƒ„ì†Œ - ë¶„í™ */
        #54a0ff 60%,   /* ì§ˆì†Œ - í•˜ëŠ˜ */
        #5f27cd 70%,   /* ì‚°ì†Œ - ë³´ë¼ */
        #00d2d3 80%,   /* í”Œë£¨ì˜¤ë¦° - ì²­ë¡ */
        #ff9f43 90%,   /* ë„¤ì˜¨ - ì£¼í™© */
        #c44569 100%   /* ë‚˜íŠ¸ë¥¨ - ìì£¼ */
      );
      background-size: 400% 400%;
      animation: gradient-shift 20s ease infinite;
    }

    @keyframes gradient-shift {
      0% { background-position: 0% 50%; }
      25% { background-position: 100% 50%; }
      50% { background-position: 100% 100%; }
      75% { background-position: 0% 100%; }
      100% { background-position: 0% 50%; }
    }

    /* ì¹´ë“œ ìŠ¬ë¡¯ ì• ë‹ˆë©”ì´ì…˜ */
    .lane-slot {
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      background: linear-gradient(145deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
      border-radius: 12px;
      backdrop-filter: blur(10px);
    }
    
    .lane-slot:hover {
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 8px 25px rgba(0,0,0,0.3);
      background: linear-gradient(145deg, rgba(255,255,255,0.2), rgba(255,255,255,0.1));
    }
    
    .lane-slot.drop-active {
      background: linear-gradient(145deg, rgba(56, 189, 248, 0.4), rgba(56, 189, 248, 0.2));
      border: 2px dashed rgb(56, 189, 248);
      border-radius: 12px;
      box-shadow: inset 0 0 20px rgba(56, 189, 248, 0.6), 0 0 30px rgba(56, 189, 248, 0.4);
      animation: pulse-border 1s ease-in-out infinite;
    }

    @keyframes pulse-border {
      0%, 100% { border-color: rgb(56, 189, 248); }
      50% { border-color: rgb(147, 197, 253); }
    }

    .card.hand-drop-target {
        outline: 3px dashed #facc15;
        outline-offset: 3px;
        transform: scale(1.08) rotateY(5deg);
        box-shadow: 0 0 25px #facc15, 0 10px 30px rgba(250, 204, 21, 0.3);
        animation: target-glow 1.5s ease-in-out infinite;
    }

    #player-hand.drop-active {
        background: linear-gradient(145deg, rgba(250, 204, 21, 0.2), rgba(250, 204, 21, 0.1));
        border: 2px dashed #facc15;
        box-shadow: inset 0 0 20px rgba(250, 204, 21, 0.3), 0 0 30px rgba(250, 204, 21, 0.2);
        animation: hand-drop-glow 1s ease-in-out infinite;
    }

    @keyframes hand-drop-glow {
        0%, 100% { 
            box-shadow: inset 0 0 20px rgba(250, 204, 21, 0.3), 0 0 30px rgba(250, 204, 21, 0.2);
        }
        50% { 
            box-shadow: inset 0 0 30px rgba(250, 204, 21, 0.5), 0 0 40px rgba(250, 204, 21, 0.4);
        }
    }

    @keyframes target-glow {
      0%, 100% { box-shadow: 0 0 25px #facc15, 0 10px 30px rgba(250, 204, 21, 0.3); }
      50% { box-shadow: 0 0 35px #facc15, 0 15px 40px rgba(250, 204, 21, 0.5); }
    }
    
    .skull-card {
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="9" r="6"></circle><path d="M8 14h8M9 16v4M15 16v4M12 13v7"></path></svg>');                                                                              
      background-repeat: no-repeat;
      background-position: center;
      background-size: 60%;
    }

    /* ì¹´ë“œ ì• ë‹ˆë©”ì´ì…˜ ê°•í™” */
    .card {
      cursor: grab;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3), 0 4px 10px rgba(0,0,0,0.2);
      background: linear-gradient(145deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255,255,255,0.3);
      position: relative;
      overflow: visible;
    }

    /* ì¹´ë“œ ë’·ë°°ê²½ ì›ì êµ¬ì¡° */
    .card::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 60px;
      height: 60px;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.1), transparent);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      z-index: 0;
    }

    .card::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 40px;
      height: 40px;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.05), transparent);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      z-index: 0;
    }

    /* ì¹´ë“œ ë‚´ë¶€ ì „ì ê¶¤ë„ */
    .card .electron-orbits {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 80px;
      height: 80px;
      transform: translate(-50%, -50%);
      z-index: 0;
      opacity: 0.3;
    }

    .card .electron-orbits::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 80px;
      height: 80px;
      border: 1px solid rgba(255, 255, 255, 0.05);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      animation: card-electron-orbit 8s linear infinite;
    }

    .card .electron-orbits::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0px;
      height: 0px;
      background: transparent;
      border-radius: 50%;
      transform: translate(-50%, -50%);
      animation: none;
      display: none;
    }

    @keyframes card-electron-orbit {
      0% { transform: translate(-50%, -50%) rotate(0deg) translateX(40px) rotate(0deg); }
      100% { transform: translate(-50%, -50%) rotate(360deg) translateX(40px) rotate(-360deg); }
    }

    /* ì›ì†Œë³„ í…Œë‘ë¦¬ íš¨ê³¼ */
    .element-nonmetal {
      border: 2px solid rgba(255, 107, 107, 0.6);
      box-shadow: 0 0 20px rgba(255, 107, 107, 0.3), inset 0 0 20px rgba(255, 107, 107, 0.1);
    }

    .element-noble-gas {
      border: 2px solid rgba(78, 205, 196, 0.6);
      box-shadow: 0 0 20px rgba(78, 205, 196, 0.3), inset 0 0 20px rgba(78, 205, 196, 0.1);
    }

    .element-alkali-metal {
      border: 2px solid rgba(69, 183, 209, 0.6);
      box-shadow: 0 0 20px rgba(69, 183, 209, 0.3), inset 0 0 20px rgba(69, 183, 209, 0.1);
    }

    .element-alkaline-earth {
      border: 2px solid rgba(150, 206, 180, 0.6);
      box-shadow: 0 0 20px rgba(150, 206, 180, 0.3), inset 0 0 20px rgba(150, 206, 180, 0.1);
    }

    .element-metalloid {
      border: 2px solid rgba(254, 202, 87, 0.6);
      box-shadow: 0 0 20px rgba(254, 202, 87, 0.3), inset 0 0 20px rgba(254, 202, 87, 0.1);
    }

    .element-transition-metal {
      border: 2px solid rgba(255, 159, 243, 0.6);
      box-shadow: 0 0 20px rgba(255, 159, 243, 0.3), inset 0 0 20px rgba(255, 159, 243, 0.1);
    }

    .element-halogen {
      border: 2px solid rgba(84, 160, 255, 0.6);
      box-shadow: 0 0 20px rgba(84, 160, 255, 0.3), inset 0 0 20px rgba(84, 160, 255, 0.1);
    }

    .element-lanthanide {
      border: 2px solid rgba(95, 39, 205, 0.6);
      box-shadow: 0 0 20px rgba(95, 39, 205, 0.3), inset 0 0 20px rgba(95, 39, 205, 0.1);
    }

    .element-actinide {
      border: 2px solid rgba(0, 210, 211, 0.6);
      box-shadow: 0 0 20px rgba(0, 210, 211, 0.3), inset 0 0 20px rgba(0, 210, 211, 0.1);
    }

    .element-other-metal {
      border: 2px solid rgba(255, 159, 67, 0.6);
      box-shadow: 0 0 20px rgba(255, 159, 67, 0.3), inset 0 0 20px rgba(255, 159, 67, 0.1);
    }

    .element-hydrogen {
      border: 2px solid rgba(255, 107, 107, 0.8);
      box-shadow: 0 0 25px rgba(255, 107, 107, 0.5), inset 0 0 25px rgba(255, 107, 107, 0.2);
    }

    .element-carbon {
      border: 2px solid rgba(45, 55, 72, 0.8);
      box-shadow: 0 0 25px rgba(45, 55, 72, 0.5), inset 0 0 25px rgba(45, 55, 72, 0.2);
    }

    .element-gold {
      border: 2px solid rgba(255, 215, 0, 0.8);
      box-shadow: 0 0 30px rgba(255, 215, 0, 0.6), inset 0 0 30px rgba(255, 215, 0, 0.3);
    }

    .element-uranium {
      border: 2px solid rgba(196, 69, 105, 0.8);
      box-shadow: 0 0 25px rgba(196, 69, 105, 0.5), inset 0 0 25px rgba(196, 69, 105, 0.2);
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }

    .card:hover::before {
      left: 100%;
    }

    .card:hover {
      transform: translateY(-8px) scale(1.05) rotateY(2deg);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4), 0 15px 25px rgba(0,0,0,0.2);
    }

    .card:active {
      transform: translateY(-4px) scale(1.02);
    }

    .card.dragging {
      cursor: grabbing;
      opacity: 0.9;
      transform: scale(1.1) rotateZ(3deg) rotateY(5deg);
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.6), 0 15px 30px rgba(0,0,0,0.3);
      z-index: 1000;
    }

    /* ë¶„ì í•©ì„± ì¹´ë“œ */
    .synthesis-card {
      background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57, #ff9ff3, #54a0ff);
      background-size: 400% 400%;
      animation: rainbow-bg 8s ease infinite;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3), 0 4px 10px rgba(0,0,0,0.2);
      position: relative;
    }

    /* ë¶„ì ì¹´ë“œ ë”ìš± í™”ë ¤í•˜ê²Œ */
    .molecule-flashy {
      background-image: radial-gradient(circle at 20% 20%, rgba(255,255,255,0.12), transparent 40%),
                        radial-gradient(circle at 80% 30%, rgba(255,255,255,0.08), transparent 45%),
                        linear-gradient(135deg, rgba(139,92,246,0.2), rgba(59,130,246,0.15));
      box-shadow: 0 0 20px rgba(139, 92, 246, 0.6), 0 0 40px rgba(59, 130, 246, 0.3);
      animation: molecule-glow 3s ease-in-out infinite;
    }

    @keyframes molecule-glow {
      0%, 100% { box-shadow: 0 0 18px rgba(139,92,246,0.5), 0 0 30px rgba(59,130,246,0.25); transform: translateY(0); }
      50% { box-shadow: 0 0 28px rgba(139,92,246,0.9), 0 0 60px rgba(59,130,246,0.5); transform: translateY(-1px); }
    }

    .synthesis-card::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.3) 50%, transparent 70%);
      animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    @keyframes rainbow-bg {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    @keyframes pulse-glow {
      0% { box-shadow: 0 0 10px rgba(255, 223, 0, 0.7); }
      50% { box-shadow: 0 0 30px rgba(255, 223, 0, 1), 0 0 50px rgba(255, 223, 0, 0.5); }
      100% { box-shadow: 0 0 10px rgba(255, 223, 0, 0.7); }
    }

    .reaction-active {
      animation: pulse-glow 2s infinite;
    }

    /* ë¶„ì ì• ë‹ˆë©”ì´ì…˜ */
    .molecule-animation {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 20;
    }

    .molecule-flash {
      animation: flash 1s forwards;
    }

    @keyframes flash {
      0% { 
        background: linear-gradient(45deg, rgba(147, 51, 234, 0), rgba(59, 130, 246, 0));
        transform: scale(1);
      }
      50% { 
        background: linear-gradient(45deg, rgba(147, 51, 234, 0.8), rgba(59, 130, 246, 0.8));
        transform: scale(1.1);
      }
      100% { 
        background: linear-gradient(45deg, rgba(147, 51, 234, 0), rgba(59, 130, 246, 0));
        transform: scale(1);
      }
    }

    .element-slot.active {
      border-color: rgb(139, 92, 246);
      box-shadow: 0 0 20px rgba(139, 92, 246, 0.8), inset 0 0 20px rgba(139, 92, 246, 0.3);
      animation: active-pulse 1s ease-in-out infinite;
    }

    @keyframes active-pulse {
      0%, 100% { box-shadow: 0 0 20px rgba(139, 92, 246, 0.8), inset 0 0 20px rgba(139, 92, 246, 0.3); }
      50% { box-shadow: 0 0 30px rgba(139, 92, 246, 1), inset 0 0 30px rgba(139, 92, 246, 0.5); }
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0) rotate(0deg); }
      20%, 60% { transform: translateX(-8px) rotate(-1deg); }
      40%, 80% { transform: translateX(8px) rotate(1deg); }
    }

    .base-damage {
      animation: shake 0.6s ease-in-out;
    }

    .card-glow {
      box-shadow: 0 0 25px rgba(255, 255, 255, 0.8), 0 0 50px rgba(255, 255, 255, 0.4);
      animation: glow-pulse 2s ease-in-out infinite;
    }

    @keyframes glow-pulse {
      0%, 100% { box-shadow: 0 0 25px rgba(255, 255, 255, 0.8), 0 0 50px rgba(255, 255, 255, 0.4); }
      50% { box-shadow: 0 0 35px rgba(255, 255, 255, 1), 0 0 70px rgba(255, 255, 255, 0.6); }
    }

    .card-heal {
      animation: heal-pulse 1.5s ease-in-out;
    }

    @keyframes heal-pulse {
      0% { 
        box-shadow: 0 0 10px rgba(74, 222, 128, 0);
        transform: scale(1);
      }
      50% { 
        box-shadow: 0 0 30px rgba(74, 222, 128, 1), 0 0 50px rgba(74, 222, 128, 0.5);
        transform: scale(1.05);
      }
      100% { 
        box-shadow: 0 0 10px rgba(74, 222, 128, 0);
        transform: scale(1);
      }
    }
    
    .special-ability {
      position: absolute;
      top: -8px;
      right: -8px;
      background: linear-gradient(45deg, #ffd700, #ffed4e);
      color: black;
      border-radius: 50%;
      width: 22px;
      height: 22px;
      font-size: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      box-shadow: 0 4px 15px rgba(255, 215, 0, 0.6);
      animation: ability-bounce 2s ease-in-out infinite;
    }

    @keyframes ability-bounce {
      0%, 100% { transform: translateY(0) scale(1); }
      50% { transform: translateY(-3px) scale(1.1); }
    }

    .draw-animation {
      position: absolute;
      transform-style: preserve-3d;
      transition: all 0.5s ease;
    }

    .molecule-combine-effect {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 100;
      pointer-events: none;
    }

    .molecule-particles {
      position: absolute;
      width: 12px;
      height: 12px;
      background: linear-gradient(45deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.6));
      border-radius: 50%;
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
    }

    .atom-count {
      position: absolute;
      top: 4px;
      right: 4px;
      background: linear-gradient(45deg, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.6));
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      font-size: 11px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
    }

    .element-rank {
      position: absolute;
      bottom: 4px;
      left: 4px;
      font-size: 11px;
      font-weight: bold;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
    }

    .rank-common { color: #ffffff; }
    .rank-uncommon { color: #4ade80; }
    .rank-rare { color: #60a5fa; }
    .rank-epic { color: #c084fc; }
    .rank-legendary { color: #facc15; }

    /* ì›ì†Œë³„ ì‹¤ì œ ìƒ‰ìƒ ì‹œìŠ¤í…œ - ì£¼ê¸°ìœ¨í‘œ ë¶„ë¥˜ */
    
    /* ë¹„ê¸ˆì† ì›ì†Œ */
    .element-nonmetal { 
      background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
      box-shadow: 0 0 20px rgba(255, 107, 107, 0.3);
      position: relative;
      overflow: hidden;
    }
    
    .element-nonmetal::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                  radial-gradient(circle at 70% 70%, rgba(255, 255, 255, 0.05) 0%, transparent 50%);
      animation: atomic-pattern 8s ease-in-out infinite;
    }
    
    /* ë¹„í™œì„± ê¸°ì²´ */
    .element-noble-gas { 
      background: linear-gradient(135deg, #4ecdc4, #7dd3fc);
      position: relative;
      overflow: hidden;
    }
    
    .element-noble-gas::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.15) 0%, transparent 40%),
                  radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 40%);
      animation: atomic-pattern 10s ease-in-out infinite;
    }
    
    /* ì•Œì¹¼ë¦¬ ê¸ˆì† */
    .element-alkali-metal { 
      background: linear-gradient(135deg, #45b7d1, #74c0fc);
      position: relative;
      overflow: hidden;
    }
    
    .element-alkali-metal::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle at 40% 40%, rgba(255, 255, 255, 0.12) 0%, transparent 45%),
                  radial-gradient(circle at 60% 60%, rgba(255, 255, 255, 0.08) 0%, transparent 45%);
      animation: atomic-pattern 6s ease-in-out infinite;
    }
    
    /* ì•Œì¹¼ë¦¬ í† ê¸ˆì† */
    .element-alkaline-earth { 
      background: linear-gradient(135deg, #96ceb4, #a7f3d0);
      position: relative;
      overflow: hidden;
    }
    
    .element-alkaline-earth::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle at 25% 25%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                  radial-gradient(circle at 75% 75%, rgba(255, 255, 255, 0.06) 0%, transparent 50%);
      animation: atomic-pattern 7s ease-in-out infinite;
    }
    
    /* ì¤€ê¸ˆì† */
    .element-metalloid { 
      background: linear-gradient(135deg, #feca57, #fde68a);
      position: relative;
      overflow: hidden;
    }
    
    .element-metalloid::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle at 35% 35%, rgba(255, 255, 255, 0.2) 0%, transparent 40%),
                  radial-gradient(circle at 65% 65%, rgba(255, 255, 255, 0.1) 0%, transparent 40%);
      animation: atomic-pattern 9s ease-in-out infinite;
    }
    
    /* ì „ì´ ê¸ˆì† */
    .element-transition-metal { 
      background: linear-gradient(135deg, #ff9ff3, #fbb6ce);
      position: relative;
      overflow: hidden;
    }
    
    .element-transition-metal::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.15) 0%, transparent 45%),
                  radial-gradient(circle at 70% 70%, rgba(255, 255, 255, 0.08) 0%, transparent 45%);
      animation: atomic-pattern 8s ease-in-out infinite;
    }
    
    /* í• ë¡œê² */
    .element-halogen { 
      background: linear-gradient(135deg, #54a0ff, #93c5fd);
      position: relative;
      overflow: hidden;
    }
    
    .element-halogen::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.18) 0%, transparent 40%),
                  radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.12) 0%, transparent 40%);
      animation: atomic-pattern 11s ease-in-out infinite;
    }
    
    /* ë€íƒ€ë„˜ì¡± */
    .element-lanthanide { 
      background: linear-gradient(135deg, #5f27cd, #a78bfa);
      position: relative;
      overflow: hidden;
    }
    
    .element-lanthanide::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle at 25% 25%, rgba(255, 255, 255, 0.2) 0%, transparent 35%),
                  radial-gradient(circle at 75% 75%, rgba(255, 255, 255, 0.1) 0%, transparent 35%);
      animation: atomic-pattern 12s ease-in-out infinite;
    }
    
    /* ì•…í‹°ëŠ„ì¡± */
    .element-actinide { 
      background: linear-gradient(135deg, #00d2d3, #67e8f9);
      position: relative;
      overflow: hidden;
    }
    
    .element-actinide::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.16) 0%, transparent 40%),
                  radial-gradient(circle at 70% 70%, rgba(255, 255, 255, 0.08) 0%, transparent 40%);
      animation: atomic-pattern 13s ease-in-out infinite;
    }
    
    /* ê¸°íƒ€ ê¸ˆì† */
    .element-other-metal { 
      background: linear-gradient(135deg, #ff9f43, #fdba74);
      position: relative;
      overflow: hidden;
    }
    
    .element-other-metal::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle at 35% 35%, rgba(255, 255, 255, 0.14) 0%, transparent 45%),
                  radial-gradient(circle at 65% 65%, rgba(255, 255, 255, 0.07) 0%, transparent 45%);
      animation: atomic-pattern 10s ease-in-out infinite;
    }
    
    /* íŠ¹ë³„í•œ ì›ì†Œë“¤ */
    .element-hydrogen { 
      background: linear-gradient(135deg, #ff6b6b, #ffa8a8);
      position: relative;
      overflow: hidden;
    }
    
    .element-hydrogen::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.3) 0%, transparent 30%);
      animation: hydrogen-pattern 3s ease-in-out infinite;
    }
    
    .element-carbon { 
      background: linear-gradient(135deg, #2d3748, #4a5568);
      position: relative;
      overflow: hidden;
    }
    
    .element-carbon::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: 
        radial-gradient(circle at 25% 25%, rgba(255, 255, 255, 0.1) 0%, transparent 20%),
        radial-gradient(circle at 75% 75%, rgba(255, 255, 255, 0.1) 0%, transparent 20%),
        radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.05) 0%, transparent 40%);
      animation: carbon-pattern 5s ease-in-out infinite;
    }
    
    .element-gold { 
      background: linear-gradient(135deg, #ffd700, #ffed4e);
      position: relative;
      overflow: hidden;
    }
    
    .element-gold::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: 
        radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.4) 0%, transparent 25%),
        radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.3) 0%, transparent 25%),
        radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.2) 0%, transparent 35%);
      animation: gold-pattern 4s ease-in-out infinite;
    }
    
    .element-uranium { 
      background: linear-gradient(135deg, #c44569, #e55353);
      position: relative;
      overflow: hidden;
    }
    
    .element-uranium::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: 
        radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.2) 0%, transparent 30%),
        radial-gradient(circle at 70% 70%, rgba(255, 255, 255, 0.15) 0%, transparent 30%),
        radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 40%);
      animation: uranium-pattern 2s ease-in-out infinite;
    }

    /* ì›ì íŒ¨í„´ ì• ë‹ˆë©”ì´ì…˜ */
    @keyframes atomic-pattern {
      0%, 100% { 
        transform: rotate(0deg) scale(1);
        opacity: 0.8;
      }
      25% {
        transform: rotate(90deg) scale(1.1);
        opacity: 1;
      }
      50% {
        transform: rotate(180deg) scale(1);
        opacity: 0.9;
      }
      75% {
        transform: rotate(270deg) scale(1.1);
        opacity: 1;
      }
    }

    @keyframes hydrogen-pattern {
      0%, 100% { 
        transform: scale(1) rotate(0deg);
        opacity: 0.6;
      }
      50% {
        transform: scale(1.2) rotate(180deg);
        opacity: 1;
      }
    }

    @keyframes carbon-pattern {
      0%, 100% { 
        transform: rotate(0deg) scale(1);
        opacity: 0.7;
      }
      33% {
        transform: rotate(120deg) scale(1.1);
        opacity: 1;
      }
      66% {
        transform: rotate(240deg) scale(1.05);
        opacity: 0.9;
      }
    }

    @keyframes gold-pattern {
      0%, 100% { 
        transform: scale(1) rotate(0deg);
        opacity: 0.8;
      }
      25% {
        transform: scale(1.15) rotate(90deg);
        opacity: 1;
      }
      50% {
        transform: scale(1.1) rotate(180deg);
        opacity: 0.9;
      }
      75% {
        transform: scale(1.15) rotate(270deg);
        opacity: 1;
      }
    }

    @keyframes uranium-pattern {
      0%, 100% { 
        transform: scale(1) rotate(0deg);
        opacity: 0.6;
      }
      25% {
        transform: scale(1.3) rotate(90deg);
        opacity: 1;
      }
      50% {
        transform: scale(1.1) rotate(180deg);
        opacity: 0.8;
      }
      75% {
        transform: scale(1.3) rotate(270deg);
        opacity: 1;
      }
    }

    /* íŠœí† ë¦¬ì–¼ ì• ë‹ˆë©”ì´ì…˜ */
    .tutorial-step {
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .tutorial-step.active {
      opacity: 1;
      transform: translateX(0) scale(1);
    }

    .tutorial-step.hidden {
      display: none;
      opacity: 0;
      transform: translateX(20px) scale(0.95);
    }

    [src^="src/images/tutorial/"] {
      background: linear-gradient(135deg, #4b5563, #1f2937, #111827);
      height: 200px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-style: italic;
      color: #9ca3af;
      border-radius: 12px;
      box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.3);
    }

    .animation-in-progress {
      pointer-events: none;
    }

    .molecule-card {
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .molecule-card.hidden {
      display: none;
      opacity: 0;
      transform: translateX(30px) scale(0.9);
    }

    #prev-molecule, #next-molecule {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      background: linear-gradient(145deg, #374151, #1f2937);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    }

    #prev-molecule:hover, #next-molecule:hover {
      background: linear-gradient(145deg, #4b5563, #374151);
      transform: scale(1.1) translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
    }

    /* ë²„íŠ¼ ê·¸ë¼ë””ì–¸íŠ¸ íš¨ê³¼ */
    button {
      background: linear-gradient(145deg, #3b82f6, #1d4ed8);
      border: none;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }

    button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }

    button:hover::before {
      left: 100%;
    }

    button:hover {
      transform: translateY(-2px) scale(1.05);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
    }

    button:active {
      transform: translateY(0) scale(1.02);
    }

    /* íŠ¹ë³„í•œ ë²„íŠ¼ ìƒ‰ìƒ */
    #draw-basic-btn { background: linear-gradient(145deg, #10b981, #047857); }
    #draw-premium-btn { background: linear-gradient(145deg, #3b82f6, #1d4ed8); }
    #draw-legend-btn { background: linear-gradient(145deg, #8b5cf6, #7c3aed); }
    #heal-base-btn { background: linear-gradient(145deg, #059669, #047857); }
    #end-turn-btn { background: linear-gradient(145deg, #f59e0b, #d97706); }
    #reset-btn { background: linear-gradient(145deg, #ef4444, #dc2626); }

    /* ëª¨ë‹¬ ì• ë‹ˆë©”ì´ì…˜ */
    .modal {
      animation: modal-appear 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @keyframes modal-appear {
      0% {
        opacity: 0;
        transform: scale(0.8) translateY(-20px);
      }
      100% {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }

    /* ë°˜ì‘í˜• ì• ë‹ˆë©”ì´ì…˜ */
    @media (max-width: 768px) {
      .card:hover {
        transform: translateY(-4px) scale(1.02);
      }
      
      .card.dragging {
        transform: scale(1.05) rotateZ(2deg);
      }
      
      .lane-slot:hover {
        transform: translateY(-1px) scale(1.01);
      }

      /* ëª¨ë°”ì¼ì—ì„œ íŒŒí‹°í´ íš¨ê³¼ ìµœì í™” */
      .particle {
        width: 3px !important;
        height: 3px !important;
      }

      /* ëª¨ë°”ì¼ì—ì„œ ì• ë‹ˆë©”ì´ì…˜ ì„±ëŠ¥ ìµœì í™” */
      .card {
        will-change: transform;
        backface-visibility: hidden;
        transform: translateZ(0);
      }

      /* ëª¨ë°”ì¼ í„°ì¹˜ í”¼ë“œë°± */
      .card:active {
        transform: scale(0.95);
        transition: transform 0.1s ease;
      }

      button:active {
        transform: scale(0.95);
        transition: transform 0.1s ease;
      }

      /* ëª¨ë°”ì¼ì—ì„œ ê·¸ë¼ë””ì–¸íŠ¸ ë°°ê²½ ìµœì í™” */
      body {
        background-attachment: fixed;
      }

      /* ëª¨ë°”ì¼ì—ì„œ 3D íš¨ê³¼ ì œí•œ */
      .card:hover {
        transform: translateY(-4px) scale(1.02);
      }

      .card.dragging {
        transform: scale(1.05) rotate(2deg);
      }
    }

    /* ë§¤ìš° ì‘ì€ í™”ë©´ (320px ì´í•˜) */
    @media (max-width: 320px) {
      .card {
        transition: transform 0.2s ease;
      }

      .card:hover {
        transform: translateY(-2px) scale(1.01);
      }

      .particle {
        width: 2px !important;
        height: 2px !important;
      }
    }

    /* íƒœë¸”ë¦¿ í™”ë©´ (768px - 1024px) */
    @media (min-width: 768px) and (max-width: 1024px) {
      .card:hover {
        transform: translateY(-6px) scale(1.03) rotateY(1deg);
      }

      .card.dragging {
        transform: scale(1.08) rotateZ(2deg) rotateY(3deg);
      }
    }

    /* ëŒ€í˜• í™”ë©´ (1024px ì´ìƒ) */
    @media (min-width: 1024px) {
      .card:hover {
        transform: translateY(-8px) scale(1.05) rotateY(2deg);
      }

      .card.dragging {
        transform: scale(1.1) rotateZ(3deg) rotateY(5deg);
      }
    }

    /* ê³ í•´ìƒë„ ë””ìŠ¤í”Œë ˆì´ ìµœì í™” */
    @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
      .card {
        image-rendering: -webkit-optimize-contrast;
        image-rendering: crisp-edges;
      }
    }

    /* ì‘ì€ ì¸¡ë©´ íŒ¨ë„ ìŠ¤íƒ€ì¼ */
    #computer-base, #player-base {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    #computer-base:hover, #player-base:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
    }

    /* ê¸°ì§€ íŒ¨ë„ ë°˜ì‘í˜• */
    @media (max-width: 768px) {
      #computer-base, #player-base {
        width: 28px !important;
        padding: 0.5rem !important;
      }
      
      #computer-base h3, #player-base h3 {
        font-size: 0.6rem !important;
        margin-bottom: 0.25rem !important;
      }
      
      #computer-base .text-xs, #player-base .text-xs {
        font-size: 0.6rem !important;
      }
      
      #computer-base .h-1\.5, #player-base .h-1\.5 {
        height: 0.25rem !important;
      }
    }

    /* ì• ë‹ˆë©”ì´ì…˜ ì„±ëŠ¥ ìµœì í™” */
    .card, .lane-slot, button {
      will-change: transform;
      backface-visibility: hidden;
      transform: translateZ(0);
    }

    /* í„°ì¹˜ ë””ë°”ì´ìŠ¤ ìµœì í™” */
    @media (hover: none) and (pointer: coarse) {
      .card:hover {
        transform: none;
      }

      .card:active {
        transform: scale(0.95);
      }

      .lane-slot:hover {
        transform: none;
      }

      .lane-slot:active {
        transform: scale(1.02);
      }
    }

    /* íŒŒí‹°í´ íš¨ê³¼ */
    .particle {
      position: absolute;
      pointer-events: none;
      border-radius: 50%;
      animation: particle-float 2s ease-out forwards;
    }

    @keyframes particle-float {
      0% {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
      100% {
        opacity: 0;
        transform: scale(0.5) translateY(-100px);
      }
    }

    /* ë¹›ë‚˜ëŠ” íš¨ê³¼ */
    .shine-effect {
      position: relative;
      overflow: hidden;
    }

    .shine-effect::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      animation: shine 2s infinite;
    }

    @keyframes shine {
      0% { left: -100%; }
      100% { left: 100%; }
    }
    
    #draw-cards-btn { 
      background: linear-gradient(145deg, #10b981, #3b82f6, #8b5cf6); 
      background-size: 200% 200%;
      animation: gradient-shift 3s ease infinite;
    }

    /* ì—ë„ˆì§€ì™€ ì—´ í‘œì‹œ ì• ë‹ˆë©”ì´ì…˜ */
    @keyframes energy-pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    @keyframes heat-pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    .energy-updated {
      animation: energy-pulse 0.3s ease-in-out;
    }

    .heat-updated {
      animation: heat-pulse 0.3s ease-in-out;
    }

    .coin-updated {
      animation: coin-pulse 0.3s ease-in-out;
    }

    @keyframes coin-pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    /* ì¹´ë“œ íŒ© ì‹œìŠ¤í…œ ìŠ¤íƒ€ì¼ */
    .card-pack {
      background: linear-gradient(145deg, #8b5cf6, #a78bfa);
      box-shadow: 0 8px 25px rgba(139, 92, 246, 0.3);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .card-pack:hover {
      transform: translateY(-4px) scale(1.05);
      box-shadow: 0 15px 35px rgba(139, 92, 246, 0.4);
    }

    .pack-opening-animation {
      animation: pack-opening 2s ease-in-out;
    }

    @keyframes pack-opening {
      0% { transform: scale(1) rotateY(0deg); }
      25% { transform: scale(1.1) rotateY(5deg); }
      50% { transform: scale(1.2) rotateY(10deg); }
      75% { transform: scale(1.1) rotateY(5deg); }
      100% { transform: scale(1) rotateY(0deg); }
    }

    .card-reveal {
      animation: card-reveal 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    @keyframes card-reveal {
      0% { 
        opacity: 0; 
        transform: scale(0) rotateY(180deg); 
      }
      50% { 
        opacity: 0.5; 
        transform: scale(0.5) rotateY(90deg); 
      }
      100% { 
        opacity: 1; 
        transform: scale(1) rotateY(0deg); 
      }
    }

    .sparkle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: #fbbf24;
      border-radius: 50%;
      animation: sparkle-float 1s ease-out forwards;
    }

    @keyframes sparkle-float {
      0% {
        opacity: 1;
        transform: scale(0) translateY(0);
      }
      50% {
        opacity: 1;
        transform: scale(1) translateY(-20px);
      }
      100% {
        opacity: 0;
        transform: scale(0.5) translateY(-40px);
      }
    }

    .pack-glow {
      box-shadow: 0 0 30px rgba(139, 92, 246, 0.6), 0 0 60px rgba(139, 92, 246, 0.3);
      animation: pack-glow-pulse 1s ease-in-out infinite;
    }

    @keyframes pack-glow-pulse {
      0%, 100% { 
        box-shadow: 0 0 30px rgba(139, 92, 246, 0.6), 0 0 60px rgba(139, 92, 246, 0.3);
      }
      50% { 
        box-shadow: 0 0 40px rgba(139, 92, 246, 0.8), 0 0 80px rgba(139, 92, 246, 0.5);
      }
    }
  </style>

  <script src="src/js/specialAbilityMapper.js"></script>
  <script src="src/js/halflifeSystem.js"></script>
  <script src="src/js/statusEffects.js"></script>
  <script src="src/js/cardProperties.js"></script>
  <script src="src/js/game.js"></script>
  <script src="src/js/elementColors.js"></script>
  <script src="src/js/card.js"></script>
  <script src="src/js/numberFormatting.js"></script>
  <script src="src/js/coin.js"></script>
  <script src="src/js/animations.js"></script>
  <script src="src/js/battlefield.js"></script>
  <script src="src/js/dragdrop.js"></script>
  <script src="src/js/molecules.js"></script>
  <script src="src/js/moleculeGuide.js"></script>
  <script src="src/js/fusionSystem.js"></script>
  <script src="src/js/researchShop.js"></script>
  <script src="src/js/starManagement.js"></script>
  <script src="src/js/starCurrency.js"></script>
  <script src="src/js/starFusionUI.js"></script>
  <script src="src/js/fusionUI.js"></script>
  <script src="src/js/cardPackSystem.js"></script>
  <script src="src/js/ui.js"></script>
  <script src="src/js/onlineMatching.js"></script>
  <script src="src/js/tutorial.js"></script>
  <script src="src/js/app.js"></script>
</body>
</html>